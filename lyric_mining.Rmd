---
title: "Mining Lyrics"
output: html_notebook
---



```{r}
library(tidyverse)
library(genius)
```
```{r Loading data}
dir_input <- paste0(getwd(),  "/Input/")
file_lyrics <- paste0(dir_input, "df_lyrics.RDS")

# Read albums and pre-processed lyrics
df_albums <- read_csv2("https://raw.githubusercontent.com/mark-me/lyric_mining/master/artists_albums.csv")
if(file.exists(file_lyrics))  df_lyrics <- read_rds(file_lyrics)

# See whether new albumn lyrics should be retrieved
df_lyrics_new <- df_albums %>% 
  anti_join(df_lyrics, by = c("artist", "album")) %>% 
  add_genius(artist, album)

# Add new album lyrics
if(exists("df_lyrics")){
  df_lyrics <- rbind(df_lyrics, df_lyrics_new)
} else if(nrow(df_lyrics_new) > 0){
  df_lyrics <- df_lyrics_new
}

write_rds(df_lyrics, file_lyrics)
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.
